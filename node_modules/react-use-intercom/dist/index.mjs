import * as t from 'react';

var ce=Object.defineProperty;var v=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var Q=(e,o,a)=>o in e?ce(e,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[o]=a,m=(e,o)=>{for(var a in o||(o={}))X.call(o,a)&&Q(e,a,o[a]);if(v)for(var a of v(o))Y.call(o,a)&&Q(e,a,o[a]);return e};var Z=(e,o)=>{var a={};for(var c in e)X.call(e,c)&&o.indexOf(c)<0&&(a[c]=e[c]);if(e!=null&&v)for(var c of v(e))o.indexOf(c)<0&&Y.call(e,c)&&(a[c]=e[c]);return a};var w=(e,o)=>{let a="[react-use-intercom]";switch(e){case"info":console.log(`${a} ${o}`);break;case"warn":console.warn(`${a} ${o}`);break;case"error":console.error(`${a} ${o}`);break;default:console.log(`${a} ${o}`);}};var h=typeof window=="undefined",A=e=>(Object.keys(e).forEach(o=>{e[o]&&typeof e[o]=="object"?A(e[o]):e[o]===void 0&&delete e[o];}),e);var ie=(e,...o)=>{if(!h&&window.Intercom)return window.Intercom.apply(null,[e,...o]);w("error",`${e} Intercom instance is not initalized yet`);},s=ie;var me=t.createContext(void 0),b=me;var le=(e,o=0)=>{var a=window,c=a.Intercom;if(typeof c=="function")c("reattach_activator"),c("update",a.intercomSettings);else {var f=document,l=function(){l.c(arguments);};l.q=[],l.c=function(u){l.q.push(u);},a.Intercom=l;var p=function(){setTimeout(function(){var u=f.createElement("script");u.type="text/javascript",u.async=!0,u.src="https://widget.intercom.io/widget/"+e;var d=f.getElementsByTagName("script")[0];d.parentNode.insertBefore(u,d);},o);};document.readyState==="complete"?p():a.attachEvent?a.attachEvent("onload",p):a.addEventListener("load",p,!1);}},oe=le;var ue=e=>({custom_launcher_selector:e.customLauncherSelector,alignment:e.alignment,vertical_padding:e.verticalPadding,horizontal_padding:e.horizontalPadding,hide_default_launcher:e.hideDefaultLauncher,session_duration:e.sessionDuration,action_color:e.actionColor,background_color:e.backgroundColor}),re=e=>m({company_id:e.companyId,name:e.name,created_at:e.createdAt,plan:e.plan,monthly_spend:e.monthlySpend,user_count:e.userCount,size:e.size,website:e.website,industry:e.industry},e.customAttributes),de=e=>({type:e.type,image_url:e.imageUrl}),pe=e=>{var o;return m({email:e.email,user_id:e.userId,created_at:e.createdAt,name:e.name,phone:e.phone,last_request_at:e.lastRequestAt,unsubscribed_from_emails:e.unsubscribedFromEmails,language_override:e.languageOverride,utm_campaign:e.utmCampaign,utm_content:e.utmContent,utm_medium:e.utmMedium,utm_source:e.utmSource,utm_term:e.utmTerm,avatar:e.avatar&&de(e.avatar),user_hash:e.userHash,company:e.company&&re(e.company),companies:(o=e.companies)==null?void 0:o.map(re)},e.customAttributes)},k=e=>A(m(m({},ue(e)),pe(e)));var we=ge=>{var _=ge,{appId:e,autoBoot:o=!1,autoBootProps:a,children:c,onHide:f,onShow:l,onUnreadCountChange:p,onUserEmailSupplied:u,shouldInitialize:d=!h,apiBase:C,initializeDelay:P}=_,ae=Z(_,["appId","autoBoot","autoBootProps","children","onHide","onShow","onUnreadCountChange","onUserEmailSupplied","shouldInitialize","apiBase","initializeDelay"]);let g=t.useRef(!1),y=t.useRef(!1),[x,R]=t.useState(!1),S=Object.keys(ae).filter(r=>!r.startsWith("data-"));S.length>0&&w("warn",["some invalid props were passed to IntercomProvider. ",`Please check following props: ${S.join(", ")}.`].join(""));let D=t.useCallback(()=>{R(!1),f&&f();},[f,R]),M=t.useCallback(()=>{R(!0),l&&l();},[l,R]),I=t.useCallback(r=>{if(!window.Intercom&&!d){w("warn","Intercom instance is not initialized because `shouldInitialize` is set to `false` in `IntercomProvider`");return}s("onHide",D),s("onShow",M),s("onUserEmailSupplied",u),p&&s("onUnreadCountChange",p);let i=m(m({app_id:e},C&&{api_base:C}),r&&k(r));window.intercomSettings=i,s("boot",i),g.current=!0;},[C,e,D,M,p,u,d]);t.useEffect(()=>{!h&&d&&!y.current&&(oe(e,P),o&&I(a),y.current=!0);},[e,o,a,I,P,d]);let n=t.useCallback((r,i)=>{if(!window.Intercom&&!d){w("warn","Intercom instance is not initialized because `shouldInitialize` is set to `false` in `IntercomProvider`");return}if(!g.current){w("warn",[`"${r}" was called but Intercom has not booted yet. `,`Please call 'boot' before calling '${r}' or `,"set 'autoBoot' to true in the IntercomProvider."].join(""));return}return i()},[d]),T=t.useCallback(()=>{g.current&&(s("shutdown"),delete window.intercomSettings,g.current=!1);},[]),E=t.useCallback(()=>{g.current&&(s("shutdown"),delete window.Intercom,delete window.intercomSettings,g.current=!1);},[]),$=t.useCallback(()=>{n("update",()=>{let r=Math.floor(new Date().getTime()/1e3);s("update",{last_request_at:r});});},[n]),N=t.useCallback(r=>{n("update",()=>{if(!r){$();return}let i=k(r);window.intercomSettings=m(m({},window.intercomSettings),i),s("update",i);});},[n,$]),V=t.useCallback(()=>{n("hide",()=>{s("hide");});},[n]),L=t.useCallback(()=>{n("show",()=>s("show"));},[n]),z=t.useCallback(()=>{n("showMessages",()=>{s("showMessages");});},[n]),q=t.useCallback(r=>{n("showNewMessage",()=>{r?s("showNewMessage",r):s("showNewMessage");});},[n]),O=t.useCallback(()=>n("getVisitorId",()=>s("getVisitorId")),[n]),W=t.useCallback(r=>{n("startTour",()=>{s("startTour",r);});},[n]),j=t.useCallback(r=>{n("startChecklist",()=>{s("startChecklist",r);});},[n]),B=t.useCallback((r,i)=>{n("trackEvent",()=>{i?s("trackEvent",r,i):s("trackEvent",r);});},[n]),F=t.useCallback(r=>n("showArticle",()=>{s("showArticle",r);}),[n]),U=t.useCallback(r=>n("showSpace",()=>{s("showSpace",r);}),[n]),H=t.useCallback(r=>{n("startSurvey",()=>{s("startSurvey",r);});},[n]),K=t.useCallback(r=>n("showNews",()=>{s("showNews",r);}),[n]),G=t.useCallback(r=>n("showTicket",()=>{s("showTicket",r);}),[n]),J=t.useCallback(r=>n("showConversation",()=>{s("showConversation",r);}),[n]),se=t.useMemo(()=>({boot:I,shutdown:T,hardShutdown:E,update:N,hide:V,show:L,isOpen:x,showMessages:z,showNewMessage:q,getVisitorId:O,startTour:W,startChecklist:j,trackEvent:B,showArticle:F,startSurvey:H,showSpace:U,showNews:K,showTicket:G,showConversation:J}),[I,T,E,N,V,L,x,z,q,O,W,j,B,F,H,U,K,G,J]);return t.createElement(b.Provider,{value:se},c)},ne=()=>{let e=t.useContext(b);if(e===void 0)throw new Error('"useIntercom" must be used within `IntercomProvider`.');return e};var fe=()=>ne();

export { we as IntercomProvider, fe as useIntercom };
//# sourceMappingURL=out.js.map
//# sourceMappingURL=index.mjs.map