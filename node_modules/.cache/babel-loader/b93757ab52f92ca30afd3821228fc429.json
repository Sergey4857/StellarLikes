{"ast":null,"code":"import axios from 'axios';\nconst baseInstagramUrl = process.env.REACT_APP_BASE_INSTAGRAM_URL;\nconst consumer_key = process.env.REACT_APP_CONSUMER_KEY;\nconst consumer_secret = process.env.REACT_APP_CONSUMER_SECRET;\nconst FetchInstagramLikes = async (setTiktoklikes, setIsLoading, setError) => {\n  try {\n    const response = await axios.get(`${baseInstagramUrl}/wp-json/wc/v3/products?consumer_key=${consumer_key}&consumer_secret=${consumer_secret}`);\n    const TikTokLikesData = response.data.filter(product => product.name === 'Buy Instagram Likes').map(product => product.meta_data).flat();\n    console.log(TikTokLikesData);\n    const result = [];\n    let currentOptionSet = {};\n\n    // Проходим по каждому элементу массива\n    TikTokLikesData.forEach(item => {\n      // Обрабатываем данные с min_qty и discount\n      const minQtyMatch = item.key && item.key.match(/_alg_wc_wholesale_pricing_level_min_qty_(\\d+)/);\n      const discountMatchAlg = item.key && item.key.match(/_alg_wc_wholesale_pricing_level_discount_(\\d+)/);\n\n      // Новые данные: quantity, price, discount\n      const quantityMatch = item.key && item.key.match(/quantity_options_(\\d+)_quantity/);\n      const priceMatch = item.key && item.key.match(/quantity_options_(\\d+)_price/);\n      const discountMatch = item.key && item.key.match(/quantity_options_(\\d+)_discount/);\n      if (minQtyMatch) {\n        const index = minQtyMatch[1];\n        if (!currentOptionSet[index]) {\n          currentOptionSet[index] = {};\n        }\n        currentOptionSet[index].min_qty = item.value; // Добавляем min_qty\n      }\n\n      if (discountMatchAlg) {\n        const index = discountMatchAlg[1];\n        if (!currentOptionSet[index]) {\n          currentOptionSet[index] = {};\n        }\n        currentOptionSet[index].alg_discount = item.value; // Добавляем скидку alg\n      }\n\n      if (quantityMatch) {\n        const index = quantityMatch[1];\n        if (!currentOptionSet[index]) {\n          currentOptionSet[index] = {};\n        }\n        currentOptionSet[index].quantity = item.value; // Добавляем количество\n      }\n\n      if (priceMatch) {\n        const index = priceMatch[1];\n        if (!currentOptionSet[index]) {\n          currentOptionSet[index] = {};\n        }\n        currentOptionSet[index].price = item.value; // Добавляем цену\n      }\n\n      if (discountMatch) {\n        const index = discountMatch[1];\n        if (!currentOptionSet[index]) {\n          currentOptionSet[index] = {};\n        }\n        currentOptionSet[index].discount = item.value; // Добавляем новую скидку\n      }\n    });\n\n    for (const key in currentOptionSet) {\n      result.push(currentOptionSet[key]);\n    }\n    console.log(result); // Выводим результат в консоль\n    return result;\n  } catch (error) {\n    console.error('Error fetching data:', error); // Выводим ошибку в консоль\n    setError(true); // Устанавливаем флаг ошибки\n  }\n};\n_c = FetchInstagramLikes;\nexport default FetchInstagramLikes;\nvar _c;\n$RefreshReg$(_c, \"FetchInstagramLikes\");","map":{"version":3,"names":["axios","baseInstagramUrl","process","env","REACT_APP_BASE_INSTAGRAM_URL","consumer_key","REACT_APP_CONSUMER_KEY","consumer_secret","REACT_APP_CONSUMER_SECRET","FetchInstagramLikes","setTiktoklikes","setIsLoading","setError","response","get","TikTokLikesData","data","filter","product","name","map","meta_data","flat","console","log","result","currentOptionSet","forEach","item","minQtyMatch","key","match","discountMatchAlg","quantityMatch","priceMatch","discountMatch","index","min_qty","value","alg_discount","quantity","price","discount","push","error","_c","$RefreshReg$"],"sources":["D:/StellarLikes/src/Api/FetchInstagramLikes.jsx"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst baseInstagramUrl = process.env.REACT_APP_BASE_INSTAGRAM_URL;\r\nconst consumer_key = process.env.REACT_APP_CONSUMER_KEY;\r\nconst consumer_secret = process.env.REACT_APP_CONSUMER_SECRET;\r\n\r\nconst FetchInstagramLikes = async (setTiktoklikes, setIsLoading, setError) => {\r\n  try {\r\n    const response = await axios.get(\r\n      `${baseInstagramUrl}/wp-json/wc/v3/products?consumer_key=${consumer_key}&consumer_secret=${consumer_secret}`\r\n    );\r\n\r\n    const TikTokLikesData = response.data\r\n      .filter(product => product.name === 'Buy Instagram Likes')\r\n      .map(product => product.meta_data)\r\n      .flat();\r\n\r\n    console.log(TikTokLikesData);\r\n\r\n    const result = [];\r\n    let currentOptionSet = {};\r\n\r\n    // Проходим по каждому элементу массива\r\n    TikTokLikesData.forEach(item => {\r\n      // Обрабатываем данные с min_qty и discount\r\n      const minQtyMatch =\r\n        item.key &&\r\n        item.key.match(/_alg_wc_wholesale_pricing_level_min_qty_(\\d+)/);\r\n      const discountMatchAlg =\r\n        item.key &&\r\n        item.key.match(/_alg_wc_wholesale_pricing_level_discount_(\\d+)/);\r\n\r\n      // Новые данные: quantity, price, discount\r\n      const quantityMatch =\r\n        item.key && item.key.match(/quantity_options_(\\d+)_quantity/);\r\n      const priceMatch =\r\n        item.key && item.key.match(/quantity_options_(\\d+)_price/);\r\n      const discountMatch =\r\n        item.key && item.key.match(/quantity_options_(\\d+)_discount/);\r\n\r\n      if (minQtyMatch) {\r\n        const index = minQtyMatch[1];\r\n        if (!currentOptionSet[index]) {\r\n          currentOptionSet[index] = {};\r\n        }\r\n        currentOptionSet[index].min_qty = item.value; // Добавляем min_qty\r\n      }\r\n\r\n      if (discountMatchAlg) {\r\n        const index = discountMatchAlg[1];\r\n        if (!currentOptionSet[index]) {\r\n          currentOptionSet[index] = {};\r\n        }\r\n        currentOptionSet[index].alg_discount = item.value; // Добавляем скидку alg\r\n      }\r\n\r\n      if (quantityMatch) {\r\n        const index = quantityMatch[1];\r\n        if (!currentOptionSet[index]) {\r\n          currentOptionSet[index] = {};\r\n        }\r\n        currentOptionSet[index].quantity = item.value; // Добавляем количество\r\n      }\r\n\r\n      if (priceMatch) {\r\n        const index = priceMatch[1];\r\n        if (!currentOptionSet[index]) {\r\n          currentOptionSet[index] = {};\r\n        }\r\n        currentOptionSet[index].price = item.value; // Добавляем цену\r\n      }\r\n\r\n      if (discountMatch) {\r\n        const index = discountMatch[1];\r\n        if (!currentOptionSet[index]) {\r\n          currentOptionSet[index] = {};\r\n        }\r\n        currentOptionSet[index].discount = item.value; // Добавляем новую скидку\r\n      }\r\n    });\r\n\r\n    for (const key in currentOptionSet) {\r\n      result.push(currentOptionSet[key]);\r\n    }\r\n\r\n    console.log(result); // Выводим результат в консоль\r\n    return result;\r\n  } catch (error) {\r\n    console.error('Error fetching data:', error); // Выводим ошибку в консоль\r\n    setError(true); // Устанавливаем флаг ошибки\r\n  }\r\n};\r\n\r\nexport default FetchInstagramLikes;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}