{"ast":null,"code":"var _jsxFileName = \"D:\\\\StellarLikes\\\\src\\\\components\\\\CalculatePrice\\\\CalculatePrice.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useMemo, useCallback } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CalculatePrice = _ref => {\n  _s();\n  let {\n    data,\n    showPackages,\n    customQuantity,\n    onPriceChange\n  } = _ref;\n  const [selectedPrice, setSelectedPrice] = useState(null);\n  const [customPrice, setCustomPrice] = useState({\n    newPrice: 0,\n    oldPrice: 0,\n    savings: 0,\n    discountPercent: 0\n  });\n  const basePricePerUnit = data ? parseFloat(data.price) : 0;\n  const discountLevels = useMemo(() => {\n    return data ? data.discount_levels.slice().sort((a, b) => a.quantity - b.quantity) : [];\n  }, [data]);\n  useEffect(() => {\n    if (data && data.preset_packages.length > 0) {\n      const packages = data.preset_packages.map((pkg, index) => ({\n        ...pkg,\n        quantity: parseInt(pkg.quantity),\n        discountPercent: parseFloat(pkg.discount.replace('%', '')) / 100,\n        active: index === 0\n      }));\n      setSelectedPrice(packages[0]);\n    }\n  }, [data]);\n  const toggleLikes = index => {\n    setSelectedPrice(prev => data.preset_packages[index]);\n  };\n  const handleCustomQuantityChange = useCallback(quantity => {\n    let applicableDiscount = 0;\n    for (let i = discountLevels.length - 1; i >= 0; i--) {\n      if (quantity >= discountLevels[i].quantity) {\n        applicableDiscount = discountLevels[i].discount;\n        break;\n      }\n    }\n    const oldPrice = quantity * basePricePerUnit;\n    const newPrice = oldPrice * (1 - applicableDiscount / 100);\n    const savings = oldPrice - newPrice;\n    setCustomPrice({\n      newPrice,\n      oldPrice,\n      savings,\n      discountPercent: applicableDiscount\n    });\n    onPriceChange({\n      newPrice,\n      oldPrice,\n      savings\n    });\n  }, [discountLevels, basePricePerUnit, onPriceChange]);\n  let oldPrice = 0;\n  let newPrice = 0;\n  let savings = 0;\n  if (selectedPrice && showPackages) {\n    oldPrice = selectedPrice.quantity * basePricePerUnit;\n    newPrice = oldPrice * (1 - selectedPrice.discountPercent);\n    savings = oldPrice - newPrice;\n  }\n  useEffect(() => {\n    if (showPackages && selectedPrice) {\n      onPriceChange({\n        newPrice,\n        oldPrice,\n        savings\n      });\n    }\n  }, [newPrice, oldPrice, savings, onPriceChange, selectedPrice, showPackages]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [showPackages && data.preset_packages.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: data.preset_packages.map((pkg, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: () => toggleLikes(index),\n        children: [pkg.quantity, \" Likes for $\", pkg.price]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }, this), !showPackages && /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"number\",\n      value: customQuantity,\n      onChange: e => handleCustomQuantityChange(e.target.value),\n      placeholder: \"Custom Quantity\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n};\n_s(CalculatePrice, \"XiQS7lJeGfcj/l3yAV7RDD3t3qo=\");\n_c = CalculatePrice;\nexport default CalculatePrice;\nvar _c;\n$RefreshReg$(_c, \"CalculatePrice\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","useCallback","jsxDEV","_jsxDEV","CalculatePrice","_ref","_s","data","showPackages","customQuantity","onPriceChange","selectedPrice","setSelectedPrice","customPrice","setCustomPrice","newPrice","oldPrice","savings","discountPercent","basePricePerUnit","parseFloat","price","discountLevels","discount_levels","slice","sort","a","b","quantity","preset_packages","length","packages","map","pkg","index","parseInt","discount","replace","active","toggleLikes","prev","handleCustomQuantityChange","applicableDiscount","i","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","type","value","onChange","e","target","placeholder","_c","$RefreshReg$"],"sources":["D:/StellarLikes/src/components/CalculatePrice/CalculatePrice.jsx"],"sourcesContent":["import React, { useState, useEffect, useMemo, useCallback } from 'react';\r\n\r\nconst CalculatePrice = ({\r\n  data,\r\n  showPackages,\r\n  customQuantity,\r\n  onPriceChange,\r\n}) => {\r\n  const [selectedPrice, setSelectedPrice] = useState(null);\r\n  const [customPrice, setCustomPrice] = useState({\r\n    newPrice: 0,\r\n    oldPrice: 0,\r\n    savings: 0,\r\n    discountPercent: 0,\r\n  });\r\n\r\n  const basePricePerUnit = data ? parseFloat(data.price) : 0;\r\n\r\n  const discountLevels = useMemo(() => {\r\n    return data\r\n      ? data.discount_levels.slice().sort((a, b) => a.quantity - b.quantity)\r\n      : [];\r\n  }, [data]);\r\n\r\n  useEffect(() => {\r\n    if (data && data.preset_packages.length > 0) {\r\n      const packages = data.preset_packages.map((pkg, index) => ({\r\n        ...pkg,\r\n        quantity: parseInt(pkg.quantity),\r\n        discountPercent: parseFloat(pkg.discount.replace('%', '')) / 100,\r\n        active: index === 0,\r\n      }));\r\n      setSelectedPrice(packages[0]);\r\n    }\r\n  }, [data]);\r\n\r\n  const toggleLikes = index => {\r\n    setSelectedPrice(prev => data.preset_packages[index]);\r\n  };\r\n\r\n  const handleCustomQuantityChange = useCallback(\r\n    quantity => {\r\n      let applicableDiscount = 0;\r\n      for (let i = discountLevels.length - 1; i >= 0; i--) {\r\n        if (quantity >= discountLevels[i].quantity) {\r\n          applicableDiscount = discountLevels[i].discount;\r\n          break;\r\n        }\r\n      }\r\n\r\n      const oldPrice = quantity * basePricePerUnit;\r\n      const newPrice = oldPrice * (1 - applicableDiscount / 100);\r\n      const savings = oldPrice - newPrice;\r\n      setCustomPrice({\r\n        newPrice,\r\n        oldPrice,\r\n        savings,\r\n        discountPercent: applicableDiscount,\r\n      });\r\n\r\n      onPriceChange({ newPrice, oldPrice, savings });\r\n    },\r\n    [discountLevels, basePricePerUnit, onPriceChange]\r\n  );\r\n\r\n  let oldPrice = 0;\r\n  let newPrice = 0;\r\n  let savings = 0;\r\n\r\n  if (selectedPrice && showPackages) {\r\n    oldPrice = selectedPrice.quantity * basePricePerUnit;\r\n    newPrice = oldPrice * (1 - selectedPrice.discountPercent);\r\n    savings = oldPrice - newPrice;\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (showPackages && selectedPrice) {\r\n      onPriceChange({ newPrice, oldPrice, savings });\r\n    }\r\n  }, [newPrice, oldPrice, savings, onPriceChange, selectedPrice, showPackages]);\r\n\r\n  return (\r\n    <div>\r\n      {showPackages && data.preset_packages.length > 0 && (\r\n        <div>\r\n          {data.preset_packages.map((pkg, index) => (\r\n            <div key={index} onClick={() => toggleLikes(index)}>\r\n              {pkg.quantity} Likes for ${pkg.price}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {!showPackages && (\r\n        <input\r\n          type=\"number\"\r\n          value={customQuantity}\r\n          onChange={e => handleCustomQuantityChange(e.target.value)}\r\n          placeholder=\"Custom Quantity\"\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CalculatePrice;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}