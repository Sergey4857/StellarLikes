{"ast":null,"code":"import _slicedToArray from\"D:/StellarLikes/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import css from'./CalculatePrice.module.css';import{jsxs as _jsxs}from\"react/jsx-runtime\";var CalculatePrice=function CalculatePrice(_ref){var basePricePerUnit=_ref.basePricePerUnit,quantity=_ref.quantity,_ref$discountLevels=_ref.discountLevels,discountLevels=_ref$discountLevels===void 0?[]:_ref$discountLevels,showCustomQuantity=_ref.showCustomQuantity,customQuantity=_ref.customQuantity,onPriceCalculated=_ref.onPriceCalculated;var _useState=useState({oldPrice:0,newPrice:0,savings:0,discountPercent:0}),_useState2=_slicedToArray(_useState,2),priceDetails=_useState2[0],setPriceDetails=_useState2[1];useEffect(function(){var calculatePrice=function calculatePrice(){var discountPercent=0;var finalQuantity=showCustomQuantity?customQuantity:quantity;// Calculate the discount percent based on finalQuantity\nfor(var i=discountLevels.length-1;i>=0;i--){if(finalQuantity>=discountLevels[i].quantity){discountPercent=discountLevels[i].discount/100;break;}}var oldPrice=finalQuantity*basePricePerUnit;var newPrice=oldPrice*(1-discountPercent);var savings=oldPrice-newPrice;var calculatedPriceDetails={oldPrice:oldPrice,newPrice:newPrice,savings:savings,discountPercent:discountPercent*100};setPriceDetails(calculatedPriceDetails);if(onPriceCalculated){onPriceCalculated(calculatedPriceDetails);}};calculatePrice();},[basePricePerUnit,quantity,discountLevels,customQuantity,showCustomQuantity,// Ensure this is included\nonPriceCalculated]);return/*#__PURE__*/_jsxs(\"div\",{className:css.priceContent,children:[/*#__PURE__*/_jsxs(\"div\",{className:css.priceWrap,children:[/*#__PURE__*/_jsxs(\"div\",{className:css.mainPrice,children:[\"$\",priceDetails.newPrice.toFixed(2)]}),/*#__PURE__*/_jsxs(\"div\",{className:css.oldPrice,children:[\"$\",priceDetails.oldPrice.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:css.savings,children:[\"You\\u2019re saving\",' ',/*#__PURE__*/_jsxs(\"span\",{className:css.savingsPrice,children:[\"$\",priceDetails.savings.toFixed(2)]})]})]});};export default CalculatePrice;","map":{"version":3,"names":["React","useEffect","useState","css","jsxs","_jsxs","CalculatePrice","_ref","basePricePerUnit","quantity","_ref$discountLevels","discountLevels","showCustomQuantity","customQuantity","onPriceCalculated","_useState","oldPrice","newPrice","savings","discountPercent","_useState2","_slicedToArray","priceDetails","setPriceDetails","calculatePrice","finalQuantity","i","length","discount","calculatedPriceDetails","className","priceContent","children","priceWrap","mainPrice","toFixed","savingsPrice"],"sources":["D:/StellarLikes/src/components/CalculatePrice/CalculatePrice.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport css from './CalculatePrice.module.css';\r\n\r\nconst CalculatePrice = ({\r\n  basePricePerUnit,\r\n  quantity,\r\n  discountLevels = [],\r\n  showCustomQuantity,\r\n  customQuantity,\r\n  onPriceCalculated,\r\n}) => {\r\n  const [priceDetails, setPriceDetails] = useState({\r\n    oldPrice: 0,\r\n    newPrice: 0,\r\n    savings: 0,\r\n    discountPercent: 0,\r\n  });\r\n\r\n  useEffect(() => {\r\n    const calculatePrice = () => {\r\n      let discountPercent = 0;\r\n      let finalQuantity = showCustomQuantity ? customQuantity : quantity;\r\n\r\n      // Calculate the discount percent based on finalQuantity\r\n      for (let i = discountLevels.length - 1; i >= 0; i--) {\r\n        if (finalQuantity >= discountLevels[i].quantity) {\r\n          discountPercent = discountLevels[i].discount / 100;\r\n          break;\r\n        }\r\n      }\r\n\r\n      const oldPrice = finalQuantity * basePricePerUnit;\r\n      const newPrice = oldPrice * (1 - discountPercent);\r\n      const savings = oldPrice - newPrice;\r\n\r\n      const calculatedPriceDetails = {\r\n        oldPrice,\r\n        newPrice,\r\n        savings,\r\n        discountPercent: discountPercent * 100,\r\n      };\r\n\r\n      setPriceDetails(calculatedPriceDetails);\r\n\r\n      if (onPriceCalculated) {\r\n        onPriceCalculated(calculatedPriceDetails);\r\n      }\r\n    };\r\n\r\n    calculatePrice();\r\n  }, [\r\n    basePricePerUnit,\r\n    quantity,\r\n    discountLevels,\r\n    customQuantity,\r\n    showCustomQuantity, // Ensure this is included\r\n    onPriceCalculated,\r\n  ]);\r\n\r\n  return (\r\n    <div className={css.priceContent}>\r\n      <div className={css.priceWrap}>\r\n        <div className={css.mainPrice}>${priceDetails.newPrice.toFixed(2)}</div>\r\n        <div className={css.oldPrice}>${priceDetails.oldPrice.toFixed(2)}</div>\r\n      </div>\r\n      <div className={css.savings}>\r\n        Youâ€™re saving{' '}\r\n        <span className={css.savingsPrice}>\r\n          ${priceDetails.savings.toFixed(2)}\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CalculatePrice;\r\n"],"mappings":"qGAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,GAAG,KAAM,6BAA6B,CAAC,OAAAC,IAAA,IAAAC,KAAA,yBAE9C,GAAM,CAAAC,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAAC,IAAA,CAOd,IANJ,CAAAC,gBAAgB,CAAAD,IAAA,CAAhBC,gBAAgB,CAChBC,QAAQ,CAAAF,IAAA,CAARE,QAAQ,CAAAC,mBAAA,CAAAH,IAAA,CACRI,cAAc,CAAdA,cAAc,CAAAD,mBAAA,UAAG,EAAE,CAAAA,mBAAA,CACnBE,kBAAkB,CAAAL,IAAA,CAAlBK,kBAAkB,CAClBC,cAAc,CAAAN,IAAA,CAAdM,cAAc,CACdC,iBAAiB,CAAAP,IAAA,CAAjBO,iBAAiB,CAEjB,IAAAC,SAAA,CAAwCb,QAAQ,CAAC,CAC/Cc,QAAQ,CAAE,CAAC,CACXC,QAAQ,CAAE,CAAC,CACXC,OAAO,CAAE,CAAC,CACVC,eAAe,CAAE,CACnB,CAAC,CAAC,CAAAC,UAAA,CAAAC,cAAA,CAAAN,SAAA,IALKO,YAAY,CAAAF,UAAA,IAAEG,eAAe,CAAAH,UAAA,IAOpCnB,SAAS,CAAC,UAAM,CACd,GAAM,CAAAuB,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAA,CAAS,CAC3B,GAAI,CAAAL,eAAe,CAAG,CAAC,CACvB,GAAI,CAAAM,aAAa,CAAGb,kBAAkB,CAAGC,cAAc,CAAGJ,QAAQ,CAElE;AACA,IAAK,GAAI,CAAAiB,CAAC,CAAGf,cAAc,CAACgB,MAAM,CAAG,CAAC,CAAED,CAAC,EAAI,CAAC,CAAEA,CAAC,EAAE,CAAE,CACnD,GAAID,aAAa,EAAId,cAAc,CAACe,CAAC,CAAC,CAACjB,QAAQ,CAAE,CAC/CU,eAAe,CAAGR,cAAc,CAACe,CAAC,CAAC,CAACE,QAAQ,CAAG,GAAG,CAClD,MACF,CACF,CAEA,GAAM,CAAAZ,QAAQ,CAAGS,aAAa,CAAGjB,gBAAgB,CACjD,GAAM,CAAAS,QAAQ,CAAGD,QAAQ,EAAI,CAAC,CAAGG,eAAe,CAAC,CACjD,GAAM,CAAAD,OAAO,CAAGF,QAAQ,CAAGC,QAAQ,CAEnC,GAAM,CAAAY,sBAAsB,CAAG,CAC7Bb,QAAQ,CAARA,QAAQ,CACRC,QAAQ,CAARA,QAAQ,CACRC,OAAO,CAAPA,OAAO,CACPC,eAAe,CAAEA,eAAe,CAAG,GACrC,CAAC,CAEDI,eAAe,CAACM,sBAAsB,CAAC,CAEvC,GAAIf,iBAAiB,CAAE,CACrBA,iBAAiB,CAACe,sBAAsB,CAAC,CAC3C,CACF,CAAC,CAEDL,cAAc,CAAC,CAAC,CAClB,CAAC,CAAE,CACDhB,gBAAgB,CAChBC,QAAQ,CACRE,cAAc,CACdE,cAAc,CACdD,kBAAkB,CAAE;AACpBE,iBAAiB,CAClB,CAAC,CAEF,mBACET,KAAA,QAAKyB,SAAS,CAAE3B,GAAG,CAAC4B,YAAa,CAAAC,QAAA,eAC/B3B,KAAA,QAAKyB,SAAS,CAAE3B,GAAG,CAAC8B,SAAU,CAAAD,QAAA,eAC5B3B,KAAA,QAAKyB,SAAS,CAAE3B,GAAG,CAAC+B,SAAU,CAAAF,QAAA,EAAC,GAAC,CAACV,YAAY,CAACL,QAAQ,CAACkB,OAAO,CAAC,CAAC,CAAC,EAAM,CAAC,cACxE9B,KAAA,QAAKyB,SAAS,CAAE3B,GAAG,CAACa,QAAS,CAAAgB,QAAA,EAAC,GAAC,CAACV,YAAY,CAACN,QAAQ,CAACmB,OAAO,CAAC,CAAC,CAAC,EAAM,CAAC,EACpE,CAAC,cACN9B,KAAA,QAAKyB,SAAS,CAAE3B,GAAG,CAACe,OAAQ,CAAAc,QAAA,EAAC,oBACd,CAAC,GAAG,cACjB3B,KAAA,SAAMyB,SAAS,CAAE3B,GAAG,CAACiC,YAAa,CAAAJ,QAAA,EAAC,GAChC,CAACV,YAAY,CAACJ,OAAO,CAACiB,OAAO,CAAC,CAAC,CAAC,EAC7B,CAAC,EACJ,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAA7B,cAAc"},"metadata":{},"sourceType":"module"}