{"ast":null,"code":"import _slicedToArray from\"D:/StellarLikes/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import css from'./CustomQuantity.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CustomQuantity=function CustomQuantity(_ref){var discountLevels=_ref.discountLevels,basePricePerUnit=_ref.basePricePerUnit,onQuantityChange=_ref.onQuantityChange,customPrice=_ref.customPrice,customQuantity=_ref.customQuantity,blockColor=_ref.blockColor,textColor=_ref.textColor,discountColor=_ref.discountColor;var _useState=useState(customQuantity||100),_useState2=_slicedToArray(_useState,2),quantity=_useState2[0],setQuantity=_useState2[1];var _useState3=useState(customQuantity||100),_useState4=_slicedToArray(_useState3,2),inputValue=_useState4[0],setInputValue=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),discountPercent=_useState6[0],setDiscountPercent=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),nextDiscountQuantity=_useState8[0],setNextDiscountQuantity=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),nextDiscountPercent=_useState10[0],setNextDiscountPercent=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),typingTimeout=_useState12[0],setTypingTimeout=_useState12[1];// Для debounce\nconsole.log(nextDiscountQuantity);console.log(nextDiscountPercent);useEffect(function(){onQuantityChange(quantity);var applicableDiscount=0;for(var i=discountLevels.length-1;i>=0;i--){if(quantity>=discountLevels[i].quantity){applicableDiscount=discountLevels[i].discount;break;}}setDiscountPercent(Math.round(applicableDiscount));var nextLevel=null;for(var _i=0;_i<discountLevels.length;_i++){if(quantity<discountLevels[_i].quantity){nextLevel=discountLevels[_i];break;}}if(nextLevel){setNextDiscountQuantity(nextLevel.quantity-quantity);setNextDiscountPercent(nextLevel.discount);}else{setNextDiscountQuantity(null);setNextDiscountPercent(null);}},[quantity,discountLevels,onQuantityChange]);var handleInputChange=function handleInputChange(e){var value=e.target.value;setInputValue(value);if(typingTimeout){clearTimeout(typingTimeout);}setTypingTimeout(setTimeout(function(){var intValue=parseInt(value,10);if(!isNaN(intValue)&&intValue>=100&&intValue<=20000){setQuantity(intValue);}else if(intValue<100){setQuantity(100);setInputValue(100);}else if(intValue>20000){setQuantity(20000);setInputValue(20000);}else{setInputValue(quantity);}},1000));};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:css.customQuantitySection,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(css[blockColor],\" \").concat(css.customAmountBlock),children:[/*#__PURE__*/_jsx(\"div\",{className:css.customAmountTitle,children:\"Your Custom Amount\"}),/*#__PURE__*/_jsx(\"input\",{className:css.customAmountInput,type:\"number\",placeholder:\"Tap Here\",value:inputValue,onChange:handleInputChange,min:\"100\",max:\"20000\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:css.customDiscountBlock,children:[/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(css[textColor],\" \").concat(css.customDiscountTitle),children:\"Your Discount\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(css[discountColor],\" \").concat(css.customDiscountPercent),children:[discountPercent,\"% off\"]})]})]})});};export default CustomQuantity;","map":{"version":3,"names":["React","useState","useEffect","css","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CustomQuantity","_ref","discountLevels","basePricePerUnit","onQuantityChange","customPrice","customQuantity","blockColor","textColor","discountColor","_useState","_useState2","_slicedToArray","quantity","setQuantity","_useState3","_useState4","inputValue","setInputValue","_useState5","_useState6","discountPercent","setDiscountPercent","_useState7","_useState8","nextDiscountQuantity","setNextDiscountQuantity","_useState9","_useState10","nextDiscountPercent","setNextDiscountPercent","_useState11","_useState12","typingTimeout","setTypingTimeout","console","log","applicableDiscount","i","length","discount","Math","round","nextLevel","handleInputChange","e","value","target","clearTimeout","setTimeout","intValue","parseInt","isNaN","children","className","customQuantitySection","concat","customAmountBlock","customAmountTitle","customAmountInput","type","placeholder","onChange","min","max","customDiscountBlock","customDiscountTitle","customDiscountPercent"],"sources":["D:/StellarLikes/src/components/CustomQuantiy/CustomQuantity.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport css from './CustomQuantity.module.css';\r\n\r\nconst CustomQuantity = ({\r\n  discountLevels,\r\n  basePricePerUnit,\r\n  onQuantityChange,\r\n  customPrice,\r\n  customQuantity,\r\n  blockColor,\r\n  textColor,\r\n  discountColor,\r\n}) => {\r\n  const [quantity, setQuantity] = useState(customQuantity || 100);\r\n  const [inputValue, setInputValue] = useState(customQuantity || 100);\r\n  const [discountPercent, setDiscountPercent] = useState(0);\r\n  const [nextDiscountQuantity, setNextDiscountQuantity] = useState(null);\r\n  const [nextDiscountPercent, setNextDiscountPercent] = useState(null);\r\n  const [typingTimeout, setTypingTimeout] = useState(null); // Для debounce\r\n\r\n  console.log(nextDiscountQuantity);\r\n\r\n  console.log(nextDiscountPercent);\r\n  useEffect(() => {\r\n    onQuantityChange(quantity);\r\n\r\n    let applicableDiscount = 0;\r\n    for (let i = discountLevels.length - 1; i >= 0; i--) {\r\n      if (quantity >= discountLevels[i].quantity) {\r\n        applicableDiscount = discountLevels[i].discount;\r\n        break;\r\n      }\r\n    }\r\n    setDiscountPercent(Math.round(applicableDiscount));\r\n\r\n    let nextLevel = null;\r\n    for (let i = 0; i < discountLevels.length; i++) {\r\n      if (quantity < discountLevels[i].quantity) {\r\n        nextLevel = discountLevels[i];\r\n        break;\r\n      }\r\n    }\r\n    if (nextLevel) {\r\n      setNextDiscountQuantity(nextLevel.quantity - quantity);\r\n      setNextDiscountPercent(nextLevel.discount);\r\n    } else {\r\n      setNextDiscountQuantity(null);\r\n      setNextDiscountPercent(null);\r\n    }\r\n  }, [quantity, discountLevels, onQuantityChange]);\r\n\r\n  const handleInputChange = e => {\r\n    let value = e.target.value;\r\n    setInputValue(value);\r\n\r\n    if (typingTimeout) {\r\n      clearTimeout(typingTimeout);\r\n    }\r\n\r\n    setTypingTimeout(\r\n      setTimeout(() => {\r\n        let intValue = parseInt(value, 10);\r\n        if (!isNaN(intValue) && intValue >= 100 && intValue <= 20000) {\r\n          setQuantity(intValue);\r\n        } else if (intValue < 100) {\r\n          setQuantity(100);\r\n          setInputValue(100);\r\n        } else if (intValue > 20000) {\r\n          setQuantity(20000);\r\n          setInputValue(20000);\r\n        } else {\r\n          setInputValue(quantity);\r\n        }\r\n      }, 1000)\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className={css.customQuantitySection}>\r\n        <div className={`${css[blockColor]} ${css.customAmountBlock}`}>\r\n          <div className={css.customAmountTitle}>Your Custom Amount</div>\r\n          <input\r\n            className={css.customAmountInput}\r\n            type=\"number\"\r\n            placeholder=\"Tap Here\"\r\n            value={inputValue}\r\n            onChange={handleInputChange}\r\n            min=\"100\"\r\n            max=\"20000\"\r\n          />\r\n        </div>\r\n        <div className={css.customDiscountBlock}>\r\n          <div className={`${css[textColor]} ${css.customDiscountTitle}`}>\r\n            Your Discount\r\n          </div>\r\n          <div className={`${css[discountColor]} ${css.customDiscountPercent}`}>\r\n            {discountPercent}% off\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CustomQuantity;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}