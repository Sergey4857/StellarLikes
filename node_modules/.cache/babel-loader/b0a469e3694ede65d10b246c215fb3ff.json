{"ast":null,"code":"import _asyncToGenerator from\"C:/laragon/www/StellarLikes/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/laragon/www/StellarLikes/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\laragon\\\\www\\\\StellarLikes\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useState}from'react';import{useNavigate}from'react-router-dom';// Импортируем useNavigate\nimport css from'./GetFreeGoodsBtn.module.css';import{GetFreeGoods}from'Api/GetFreeService';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var GetFreeGoodsBtn=function GetFreeGoodsBtn(_ref){var fields=_ref.fields;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var navigate=useNavigate();var custom_link=fields.custom_link,email=fields.email,page_link=fields.page_link,quantity=fields.quantity,service_type=fields.service_type;var handleClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(fields);setLoading(true);setError(null);_context.prev=3;_context.next=6;return GetFreeGoods({custom_link:custom_link,email:email,page_link:page_link,product_id:179,quantity:quantity,service_type:service_type});case 6:data=_context.sent;if(data){navigate(\"/OrderConfirmation?order_id=\".concat(data));}else{setError('Error retrieving the order ID.');}_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](3);setError(_context.t0.message);case 13:_context.prev=13;setLoading(false);return _context.finish(13);case 16:case\"end\":return _context.stop();}}},_callee,null,[[3,10,13,16]]);}));return function handleClick(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{className:css.selectedLink,onClick:handleClick,disabled:loading,children:[/*#__PURE__*/_jsx(\"span\",{className:css.checkoutButtonText,children:\"Get free\"}),loading&&/*#__PURE__*/_jsx(\"span\",{className:css.loader})]}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error})]});};export default GetFreeGoodsBtn;","map":{"version":3,"names":["useState","useNavigate","css","GetFreeGoods","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","GetFreeGoodsBtn","_ref","fields","_useState","_useState2","_slicedToArray","error","setError","_useState3","_useState4","loading","setLoading","navigate","custom_link","email","page_link","quantity","service_type","handleClick","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","wrap","_callee$","_context","prev","next","console","log","product_id","sent","concat","t0","message","finish","stop","apply","arguments","children","className","selectedLink","onClick","disabled","checkoutButtonText","loader","style","color"],"sources":["C:/laragon/www/StellarLikes/src/components/GetFreeGoodsBtn/GetFreeGoodsBtn.jsx"],"sourcesContent":["import { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom'; // Импортируем useNavigate\r\nimport css from './GetFreeGoodsBtn.module.css';\r\nimport { GetFreeGoods } from 'Api/GetFreeService';\r\n\r\nconst GetFreeGoodsBtn = ({ fields }) => {\r\n  const [error, setError] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  const { custom_link, email, page_link, quantity, service_type } = fields;\r\n\r\n  const handleClick = async () => {\r\n    console.log(fields);\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const data = await GetFreeGoods({\r\n        custom_link,\r\n        email,\r\n        page_link,\r\n        product_id: 179,\r\n        quantity,\r\n        service_type,\r\n      });\r\n\r\n      if (data) {\r\n        navigate(`/OrderConfirmation?order_id=${data}`);\r\n      } else {\r\n        setError('Error retrieving the order ID.');\r\n      }\r\n    } catch (err) {\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <button\r\n        className={css.selectedLink}\r\n        onClick={handleClick}\r\n        disabled={loading}\r\n      >\r\n        <span className={css.checkoutButtonText}>Get free</span>\r\n        {loading && <span className={css.loader}></span>}\r\n      </button>\r\n      {error && <p style={{ color: 'red' }}>{error}</p>}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default GetFreeGoodsBtn;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}